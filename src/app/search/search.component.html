<!-- Search for a city -->
<app-city-search
  (aqi)='onAqi($event)'
  (firstSearchInitiated)='onFirstSearchInitiated($event)'
  (loading)='onLoading($event)'
  (errorMessage)='onErrorMessage($event)'
></app-city-search>

<!-- Error message -->
<div *ngIf='errorMessage'>
  <p>Error: {{ errorMessage }}</p>
</div>

<mat-card >
  <!-- Display when no city has been searched -->
  <h2 *ngIf='!firstSearchInitiated'>Search for a city to see the air quality index.</h2>

  <!-- Display when request for AQI and city have been made and show the results -->
  <mat-grid-list cols='2' rowHeight='4:1' *ngIf='firstSearchInitiated'>
    <mat-grid-tile>
      <mat-card-title>City:</mat-card-title>
    </mat-grid-tile>
    <mat-grid-tile>
      <mat-card-content>
        <div *ngIf='aqi'>
          {{aqi.data.city}}, {{aqi.data.state}}
        </div>
        <div *ngIf='loading'>
          <mat-spinner></mat-spinner>
        </div>
      </mat-card-content>
    </mat-grid-tile>
    <mat-grid-tile>
      <mat-card-title>AQI:</mat-card-title>
    </mat-grid-tile>
    <mat-grid-tile>
      <mat-card-content>
        <div *ngIf='aqi'>
          {{aqi.data.current.pollution.aqius}}
        </div>
        <div *ngIf='loading'>
          <mat-spinner></mat-spinner>
        </div>
      </mat-card-content>
    </mat-grid-tile>
    <mat-grid-tile>
      <mat-card-title>Temperature:</mat-card-title>
    </mat-grid-tile>
    <mat-grid-tile>
      <mat-card-content>
        <div *ngIf='aqi'>
          {{aqi.data.current.weather.tp}}
        </div>
        <div *ngIf='loading'>
          <mat-spinner></mat-spinner>
        </div>
      </mat-card-content>
    </mat-grid-tile>
    <mat-grid-tile>
      <mat-card-title>Humidity:</mat-card-title>
    </mat-grid-tile>
    <mat-grid-tile>
      <mat-card-content>
        <div *ngIf='aqi'>
          {{aqi.data.current.weather.hu}}%
        </div>
        <div *ngIf='loading'>
          <mat-spinner></mat-spinner>
        </div>
      </mat-card-content>
    </mat-grid-tile>
  </mat-grid-list>
</mat-card>

<div class='indexscale'>
  <app-indexscale></app-indexscale>
</div>